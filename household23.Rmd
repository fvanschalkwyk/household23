---
title: "General Household Survey 2023"
author: "Francois van Schalkwyk"
date: "2024-12-18"
output: pdf_document
---

```{r setup, include=FALSE}

# Set document options

  knitr::opts_chunk$set(echo = TRUE)

```

# 1. Workspace Set Up

```{r}

# Load the required packages

  library(tidyverse)
  library(readxl)

```

# Person File

## Data Import

```{r}

# Read in the data from csv

  df <- read_csv("GHS-2023-PERSON_F1.csv")

  spec(df)

```

```{r}

# Quick overview of the data

  glimpse(df)

# Random sample of the data

  slice_sample(df, n = 10)

```

## Variable creation from metadata

```{r}

# Provinces (provincial boundaries demarcated in 2005)

  df <- df %>%
  
    mutate(prov = case_when(
      prov == 1 ~ "Western Cape",
      prov == 2 ~ "Eastern Cape",
      prov == 3 ~ "Northern Cape",
      prov == 4 ~ "Free State",
      prov == 5 ~ "KwaZulu-Natal",
      prov == 6 ~ "North West",
      prov == 7 ~ "Gauteng",
      prov == 8 ~ "Mpumalanga",
      prov == 9 ~ "Limpopo",
      .default = as.character(prov)
    ) %>% as_factor())

```

```{r}

# Gender

  df <- df %>%
  
    mutate(Sex = case_when(
      Sex == 1 ~ "Male",
      Sex == 2 ~ "Female",
      .default = as.character(Sex)
    ) %>% as_factor())

```

```{r}

# Population Group

df <- df %>%
  
  mutate(Population = case_when(
    Population == 1 ~ "African/Black",
    Population == 2 ~ "Coloured",
    Population == 3 ~ "Indian/Asian",
    Population == 4 ~ "White"
  ) %>% as_factor())

```

```{r}

# Languages

  df <- df %>%
  
    mutate(Languages = case_when(
      Languages == 1 ~ "Afrikaans",
      Languages == 2 ~ "English",
      Languages == 3 ~ "IsiNdebele",
      Languages == 4 ~ "IsiXhosa",
      Languages == 5 ~ "IsiZulu",
      Languages == 6 ~ "Khoi, Nama and San languages",
      Languages == 7 ~ "Sepedi",
      Languages == 8 ~ "Sesotho",
      Languages == 9 ~ "Setswana",
      Languages == 10 ~ "Sign language",
      Languages == 11 ~ "SiSwati",
      Languages == 12 ~ "Tshivenda",
      Languages == 13 ~ "Xitsonga",
      Languages == 14 ~ "Other language not specified",
      Languages == 15 ~ "Unspecified"
    ) %>% as_factor())

```

```{r}

# Relationship to the head of the household

df <- df %>%
  
  mutate(hhc_relationship = case_when(
     hhc_relationship == 1 ~ "Head/acting head",
     hhc_relationship == 2 ~ "Husband/wife/partner of household head",
     hhc_relationship == 3 ~ "Son/daughter/stepchild/adopted child of household head",
     hhc_relationship == 4 ~ "Brother/sister/stepbrother/stepsister of household head",
     hhc_relationship == 5 ~ "Father/mother/stepfather/stepmother of household head",
     hhc_relationship == 6 ~ "Grandparent/great grandparent of household head",
     hhc_relationship == 7 ~ "Grandchild/great grandchild of household head",
     hhc_relationship == 8 ~ "Other relative (e.g. in-laws or aunt/uncle) of household head",
     hhc_relationship == 9 ~ "Non-related persons",
     hhc_relationship == 99 ~ "Unspecified"
 ) %>% as_factor())

```

```{r}

# Marital status

df <- df %>%
  
  mutate(hhc_marital = case_when(
    hhc_marital == 1 ~ "Legally married",
    hhc_marital == 2 ~ "Living together like husband and wife/partners",
    hhc_marital == 3 ~ "Divorced",
    hhc_marital == 4 ~ "Separated, but still legally married",
    hhc_marital == 5 ~ "Widowed",
    hhc_marital == 6 ~ "Single, but have lived together with someone as husband/wife before",
    hhc_marital == 7 ~ "Single and have never been married/never lived together as husband/wife before",
    hhc_marital == 9 ~ "Unspecified"
) %>% as_factor())

```

```{r}

# Does the spouse live in this household (only relevant for 'Legally married' and "Living together like husband and wife/partners)

  df <- df %>%
  
    mutate(spouse = case_when(
      spouse == 1 ~ "Yes",
      spouse == 2 ~ "No",
      spouse == 8 ~ "Not applicable",
      spouse == 9 ~ "Unspecified"
    ) %>% as_factor())

```

```{r}

# Is the father alive?

  df <- df %>%
  
    mutate(hhc_fath_alive = case_when(
      hhc_fath_alive == 1 ~ "Yes",
      hhc_fath_alive == 2 ~ "No",
      hhc_fath_alive == 3 ~ "Do not know",
      hhc_fath_alive == 9 ~ "Unspecified"
    ) %>% as_factor())

```

```{r}

# Is the father part of the household? (Only for 'Yes' in previous question)

  df <- df %>%
  
    mutate(hhc_fath_parthh = case_when(
      hhc_fath_parthh == 1 ~ "Yes",
      hhc_fath_parthh == 2 ~ "No",
      hhc_fath_parthh == 8 ~ "Not applicable"
    ) %>% as_factor())

```

```{r}

# Is the mother alive?

  df <- df %>%
  
    mutate(hhc_moth_alive = case_when(
      hhc_moth_alive == 1 ~ "Yes",
      hhc_moth_alive == 2 ~ "No",
      hhc_moth_alive == 3 ~ "Do not know",
      hhc_moth_alive == 9 ~ "Unspecified"
    ) %>% as_factor())

```

```{r}

# Is the mother part of the household? (Only if mother is still alive)

  df <- df %>%
  
    mutate(hhc_moth_parthh = case_when(
      hhc_moth_parthh == 1 ~ "Yes",
      hhc_moth_parthh == 2 ~ "No",
      hhc_moth_parthh == 8 ~ "Not applicable"
    ) %>% as_factor())

```

```{r}

# What is the highest level of education completed?

  df <- df %>%
  
    mutate(education = case_when(
      education == 0 ~ "GRADE R/0",
      education == 1 ~ "GRADE 1/SUB A/CLASS 1",
      education == 2 ~ "GRADE 2/SUB B/CLASS 2",
      education == 3 ~ "GRADE 3/STANDARD 1/ABET/AET 1",
      education == 4 ~ "GRADE 4/STANDARD 2",
      education == 5 ~ "GRADE 5/STANDARD 3/ABET/AET 2",
      education == 6 ~ "GRADE 6/STANDARD 4",
      education == 7 ~ "GRADE 7/STANDARD 5/ABET/AET 3",
      education == 8 ~ "GRADE 8/STANDARD 6/FORM 1",
      education == 9 ~ "GRADE 9/STANDARD 7/FORM 2/ABET/AET 4/NCV LEVEL 1/OCCUPATIONAL CERTIFICATE - NQF LEVEL 1",
      education == 10 ~ "GRADE 10/STANDARD 8/FORM 3/NCV LEVEL 2/OCCUPATIONAL CERTIFICATE - NQF LEV EL 2",
      education == 11 ~ "GRADE 11/STANDARD 9/FORM 4/NCV LEVEL 3/OCCUPATIONAL CERTIFICATE NQF LEV EL 3",
      education == 12 ~ "GRADE 12/STANDARD 10/FORM 5/ NATIONAL SENIOR CERTIFICATE/ MATRIC/ NCV LEVEL 4 /OCCUPATIONAL CERTIFICATE – NQF LEVEL 4",
      education == 13 ~ "NTC L/N1/NQF 1",
      education == 14 ~ "NTC LL/N2/NQF 2",
      education == 15 ~ "NTC LLL/N3/NQF 3",
      education == 16 ~ "N4/NTC 4/OCCUPATIONAL CERTIFICATE NQF LEVEL 5",
      education == 17 ~ "N5/NTC 5/OCCUPATIONAL CERTIFICATE NQF LEVEL 5",
      education == 18 ~ "N6/NTC 6/OCCUPATIONAL CERTIFICATE NQF LEVEL 5",
      education == 19 ~ "CERTIFICATE WITH LESS THAN GRADE 12/STANDARD 10",
      education == 20 ~ "DIPLOMA WITH LESS THAN GRADE 12/ STANDARD 10",
      education == 21 ~ "HIGHER/NATIONAL/ADVANCE CERTIFICATE WITH GRADE 12/STD 10/ OCCUPATIONAL CERTIFICATE – NQF LEVEL 5",
      education == 22 ~ "DIPLOMA WITH GRADE 12/STANDARD 10/OCCUPATIONAL CERTIFICATE – NQF LEVEL 6",
      education == 23 ~ "HIGHER DIPLOMA/OCCUPATIONAL CERTIFICATE (B-TECH DIPLOMA) – NQF LEVEL 7",
      education == 24 ~ "BACHELOR’S DEGREE/OCCUPATIONAL CERTIFICATE – NQF LEVEL 7",
      education == 25 ~ "HONOURS DEGREE/POSTGRADUATE DIPLOMA/OCCUPATIONAL CERTIFICATE NQF LEVEL 8",
      education == 26 ~ "POST HIGHER DIPLOMA (M-TECH AND MASTER'S DEGREE) – NQF LEVEL 9",
      education == 27 ~ "DOCTORAL DEGREES (D-TECH AND PHD)– NQF LEVEL 10",
      education == 28 ~ "OTHER THAN ANY OF THE ABOVE",
      education == 29 ~ "DO NOT KNOW",
      education == 98 ~ "NO SCHOOLING",
      education == 99 ~ "UNSPECIFIED"
) %>% as_factor())

```

```{r}

# Currently attending educational institution (aged 5 years and older)

  df <- df %>%
  
    mutate(edu_attend = case_when(
      edu_attend == 1 ~ "Yes",
      edu_attend == 2 ~ "No",
      edu_attend == 3 ~ "Do not know",
      edu_attend == 8 ~ "Not applicable",
      edu_attend == 9 ~ "Unspecified"
    ) %>% as_factor())

```

```{r}

# Main reason for not attending educational institute (five years and older, not currently attending educational institution)

  df <- df %>%
  
    mutate(edu_rsnn = case_when(
      edu_rsnn ==  1 ~ 'Too old/young',
      edu_rsnn ==  2 ~ 'Has completed education/satisfied with my level of education/do not want to study',
      edu_rsnn ==  3 ~ 'School/education institution is too far',
      edu_rsnn ==  4 ~ 'Difficulties to get to school (transport)',
      edu_rsnn ==  5 ~ 'No money for fees',
      edu_rsnn ==  6 ~ 'He or she is working at home or business/job',
      edu_rsnn ==  7 ~ 'Family commitment (e.g. child minding)',
      edu_rsnn ==  8 ~ 'Education is useless or not interesting',
      edu_rsnn ==  9 ~ 'Unable to perform at school',
      edu_rsnn ==  10 ~ 'Illness',
      edu_rsnn ==  11 ~ 'Pregnancy',
      edu_rsnn ==  12 ~ 'Failed exams',
      edu_rsnn ==  13 ~ 'Got married',
      edu_rsnn ==  14 ~ 'Disability',
      edu_rsnn ==  15 ~ 'Violence in school',
      edu_rsnn ==  16 ~ 'Not accepted for enrolment',
      edu_rsnn ==  17 ~ 'Do not have time/too busy',
      edu_rsnn ==  18 ~ 'Other reason for not attending an educational institution',
      edu_rsnn ==  88 ~ 'Not applicable',
      edu_rsnn ==  99 ~ 'Unspecified'
    ) %>% as_factor())

```

```{r}

# Covered by medical aid scheme or medical benefit scheme or other private health insurance?

  df <- df %>%
  
    mutate(hlt_medi = case_when(
      hlt_medi == 1 ~ "Yes",
      hlt_medi == 2 ~ "No",
      hlt_medi == 3 ~ "Do not know"
    ) %>% as_factor())

```

```{r}

# Does the person live in a metro?

  df <- df %>%
  
    mutate(metro = case_when(
      metro == 1 ~ "Metro",
      metro == 2 ~ "Non-metro"
    ) %>% as_factor())

```

```{r}

# Does the person live in a metro?

  df <- df %>%
  
    mutate(metro_code = case_when(
metro_code == 1 ~ "WC – Non-metro",
metro_code == 2 ~ "WC – City of Cape Town",
metro_code == 3 ~ "EC – Non-metro",
metro_code == 4 ~ "EC – Buffalo City",
metro_code == 5 ~ "EC – Nelson Mandela Bay",
metro_code == 6 ~ "NC – Non-metro",
metro_code == 7 ~ "FS – Non-metro",
metro_code == 8 ~ "FS – Mangaung",
metro_code == 9 ~ "KZN – Non-metro",
metro_code == 10 ~ "KZN – eThekwini",
metro_code == 11 ~ "NW – Non-metro",
metro_code == 12 ~ "GP – Non-metro",
metro_code == 13 ~ "GP – Ekurhuleni",
metro_code == 14 ~ "GP – City of Johannesburg",
metro_code == 15 ~ "GP – City of Tshwane",
metro_code == 16 ~ "MP – Non-metro",
metro_code == 17 ~ "LP – Non-metro"
   ) %>% as_factor())

```

## Data Overview and Checking

```{r}

  glimpse(df)

```
## Analysis

### Primary analysis

```{r}

# Distribution by province

  df %>%
  
    group_by(prov) %>%
  
    summarise(count = n()) %>%
  
    arrange(-count) %>% # Total 71 174

# Plot these data

  ggplot(aes(x = count, y = fct_reorder(prov, count))) +
  
    theme_minimal() +
  
    labs(
      x = "People surveyed",
      caption = "(General Household Survey, 2023. Statistics South Africa)"
    ) +
  
    geom_col() +
  
    theme(
      axis.title.y = element_blank()
    )

```
```{r}

# Distribution by age group

  df %>%
  
  # Create age bins
  
    mutate(
      age_group = cut(age, 
                      breaks = c(-1, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 130),
                      labels = c(
                        "0-5 years", 
                        "5-10 years",
                        "10-15 years",
                        "15-20 years", 
                        "20-25 years", 
                        "25-30 years",
                        "30-35 years",
                        "35-40 years", 
                        "40-45 years", 
                        "45-50 years", 
                        "50-55 years", 
                        "55-60 years", 
                        "60-65 years", 
                        "65-70 years", 
                        "70-75 years", 
                        "75+ years")
                      ),
      .after = age) %>%
  
  # How many records in each age group?
  
  group_by(age_group) %>%
  
  summarise(count = n()) %>%
  
  # Plot the data
  
  ggplot(aes(x = count, y = age_group)) +
  
    theme_minimal() +
  
    labs(x = "Individuals surveyed", y = "Age Group", caption = "(General Household Survey, 2023. Statistics South Africa)") +
  
    geom_col()

```
```{r}

# Add gender to the above plot

  df %>%
  
  # Split the ages into bins
  
    mutate(
      age_group = cut(age, 
                      breaks = c(-1, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 130),
                      labels = c(
                        "0-5 years", 
                        "5-10 years",
                        "10-15 years",
                        "15-20 years", 
                        "20-25 years", 
                        "25-30 years",
                        "30-35 years",
                        "35-40 years", 
                        "40-45 years", 
                        "45-50 years", 
                        "50-55 years", 
                        "55-60 years", 
                        "60-65 years", 
                        "65-70 years", 
                        "70-75 years", 
                        "75+ years")
                      ),
      .after = age) %>%
  
  # Tabulate with gender
  
  select(Sex, age_group) %>%
  
  group_by(Sex, age_group) %>%
  
  summarise(count = n()) %>%
  
  mutate(count = case_when(
    Sex == "Male" ~ -count,
    .default = count
  )) %>%
  
  # Plot the data
  
  ggplot(aes(x = count, y = age_group, fill = Sex)) +
  
    theme_minimal() +
  
    labs(x = "Individuals surveyed", y = "Age Groups", caption = "(General Household Survey, 2023. Statistics South Africa)") +
  
    geom_col()
  
```
```{r}

# How does the above plot differ inside and outside of metros?

  df %>%
  
  # Split the ages into bins
  
    mutate(
      age_group = cut(age, 
                      breaks = c(-1, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 130),
                      labels = c(
                        "0-5 years", 
                        "5-10 years",
                        "10-15 years",
                        "15-20 years", 
                        "20-25 years", 
                        "25-30 years",
                        "30-35 years",
                        "35-40 years", 
                        "40-45 years", 
                        "45-50 years", 
                        "50-55 years", 
                        "55-60 years", 
                        "60-65 years", 
                        "65-70 years", 
                        "70-75 years", 
                        "75+ years")
                      ),
      .after = age) %>%
  
  # Tabulate with gender amd metro
  
  select(Sex, age_group, metro) %>%
  
  group_by(Sex, age_group, metro) %>%
  
  summarise(count = n()) %>%
  
  mutate(count = case_when(
    Sex == "Male" ~ -count,
    .default = count
  )) %>%
  
  # Plot the data
  
  ggplot(aes(x = count, y = age_group, fill = Sex)) +
  
    theme_minimal() +
  
    labs(x = "Individuals surveyed", y = "Age Groups", caption = "(General Household Survey, 2023. Statistics South Africa)") +
  
    geom_col() +
  
    facet_grid(cols = vars(metro))
  
```

```{r}

# How do the population groups vary per province, and inside and outside of metros?

  df %>%
  
    select(prov, Population, Languages, metro_code, metro) %>%
  
    group_by(Population, prov) %>%
  
    summarise(count = n()) %>%
  
    arrange(-count) %>%
  
  # Plot the distribution of population groups between the provinces
  
    ggplot(aes(y = fct_reorder(prov, count, sum), x = count, fill = Population)) +
  
      labs(
        x = "Individuals", 
        y = "Province", 
        caption = "(General Household Survey, 2023. Statistics South Africa)",
        fill = "Population Group"
        ) +
  
      geom_col(position = "stack")

```

```{r}

# Starting with how the distribution of population groups differs in and out of metros?

  df %>%
  
    select(Population, metro) %>%
  
    group_by(Population, metro) %>%
  
    summarise(count = n()) %>%
  
    arrange(-count) %>%
  
  # Plot the distribution of population groups between the provinces
  
  ggplot(aes(x = metro, y = count, fill = Population)) +
  
    theme_minimal() +
  
    labs(y = "Total individuals", fill = "Population Group") +
  
    geom_col(position = "dodge")

```

```{r}

# How does the distribution of population groups vary in and out of metros for each province?

  df %>%
  
    select(Population, metro, prov) %>%
  
    group_by(Population, metro, prov) %>%
  
    summarise(count = n()) %>%
  
    arrange(-count) %>%
  
  # Plot the distribution of population groups between the provinces
  
  ggplot(aes(y = metro, x = count, fill = Population)) +
  
    geom_col() +
  
    facet_grid(
      rows = vars(fct_reorder(prov, -count, sum)),
      switch = "y"
      ) +
  
    theme(
      axis.title.y = element_blank()
    )

```

```{r}

# How do the languages vary per province, and inside and outside of metros?

  df %>%
  
    select(prov, Population, Languages, metro_code, metro) %>%
  
    group_by(Population, prov) %>%
  
    summarise(count = n()) %>%
  
    arrange(-count) %>%
  
  # Plot the distribution of population groups between the provinces
  
    ggplot(aes(y = fct_reorder(prov, count, sum), x = count, fill = Population)) +
  
      labs(
        x = "Individuals", 
        y = "Province", 
        caption = "(General Household Survey, 2023. Statistics South Africa)",
        fill = "Population Group"
        ) +
  
      geom_col(position = "stack")

```


# Household File

# Dwelling types by population group and province
## Data Import

```{r}

# Read in the Excel sheet

  df <- read_excel(
    path = '1734529269766.xls',
    skip = 2
    )

```

```{r}

# Have a look at the data

  glimpse(df)

```


## Data Tidying

```{r}

# Fill the empty values where data are repeated

  df <- df %>%
  
    fill(everything(), .direction = "down")

```

```{r}

# Have a look at the data

  glimpse(df)

```

```{r}

# Have a look at the structure of the data

  summary(df)

```

```{r}

# Change the column names

df <- df %>%
  
  rename(province = Province,
         popn_group = `Population group of household head`,
         dwelling_type = `Type of main dwelling`,
         count = ...4)

```

```{r}

# Change the column types

  df <- df %>%
  
    mutate(
      province = as_factor(province),
      popn_group = as_factor(popn_group),
      dwelling_type = as_factor(dwelling_type)
      )

```

```{r}

# Remove rows where province is N=

  df <- df %>%
  
    filter(province != "N=")

```

```{r}

# Change dwelling type to capital case

  df <- df %>%
  
    mutate(dwelling_type = str_to_sentence(dwelling_type))

```

## Data Transformation

```{r}

# Get the data into long format (already in long format)

```


## Data Communication

```{r}

# How many households surveyed in each province?

  df %>%
  
    group_by(province) %>%
  
    summarise(total_households = sum(count)) %>%
  
    arrange(-total_households) %>%
  
    mutate(total_households_pct = round((total_households / sum(total_households)) * 100, 1))

```

```{r}

# How many households total in the survey

  df %>%
  
    summarise(total_households = sum(count))

```

```{r}

# How is the survey broken up by the population group of the head of the household?

  df %>%
  
    group_by(popn_group) %>%
  
    summarise(total_households = sum(count)) %>%
  
    mutate(total_households_pct = round(total_households / sum(total_households) * 100, 2)) %>%
  
    arrange(-total_households)

```

```{r}

# How many households were surveyed of each household type?

  df %>%
  
    group_by(dwelling_type) %>%
  
    summarise(total_households = sum(count)) %>%
  
    mutate(total_households_pct = round(total_households / sum(total_households) * 100, 2)) %>%
  
    arrange(-total_households)

```

# Presence of fathers in the household by population group and province

## Data Import

```{r}

# Read in the Excel file from the Nesstar site

  df <- read_excel(
    path = "1734614813714.xls",
    skip = 2
  )

```

## Data Tidying

```{r}
  
  # Rename the columns
  
  df <- df %>%
  
    rename(
      province = 'Province',
      metro = 'Metro',
      father = 'Father part of the household',
      popn_group = 'Population group',
      count = ...5
    ) %>%
    
    # Fill the NA values
    
    fill(everything(), .direction = "down") %>%
  
    # Remove the last row
  
    filter(province != "N=")

```

```{r}

# Total number of surveys

  df %>%
  
    summarise(n(), sum(count))

```

```{r}

# Have a look at the data

  df <- df %>%
  
    mutate(
      province = as_factor(province),
      metro = as_factor(metro),
      father = as_factor(father),
      popn_group = as_factor(popn_group)
    )

```

```{r}

# Have a look at the data

  summary(df)

```

## Data Transformation

## Data Communication

```{r}

# What proportion of people in each province and metro/non-metro live without fathers?

  df <- df %>%
  
    filter(father != "Not applicable") %>%
  
    group_by(province, metro, popn_group) %>%
  
    mutate(total_per_group = sum(count)) %>%
  
    mutate(percentage = round(count / total_per_group * 100, 1)) %>%
  
# Display as pivot table
  
    select(province, metro, popn_group, father, percentage) %>%

  # Filter where father not present

    filter(father == "No") %>%
  
    select(-father)

```

```{r}

# Have a look at the table

  df %>%
  
    arrange(province, popn_group, metro)

```

```{r}

# Plot the data 

  df %>%
  
    ggplot(aes(x = metro, y = province, fill = percentage)) +
  
      theme_minimal() +
  
      geom_raster() +
  
      facet_grid(cols = vars(popn_group)) +
  
      theme(
        axis.text.x = element_text(angle = 90),
        legend.position = "bottom"
      ) +
  
      scale_fill_distiller(name = "Percentage of individuals living in household without father", palette = "RdYlGn") +
  
      scale_x_discrete(name = "Metro") +
  
      scale_y_discrete(name = "Province")

RColorBrewer::display.brewer.all()

```
# Proportion of children that know whether father is alive or not
# Data Import

```{r}

# Read in Excel document of household survey data

  df <- read_excel(
    path = '1734940107603.xls',
    skip = 2
    )

```

# Data Tidying

```{r}

# Replace the column names

  colnames(df) <- c("province", "gender", "age_group", "population_group", "rel_head", "father_alive", "father_part_household", "count")

```

```{r}

# Fill in the empty data values

  df <- df %>%
    
    fill(everything(), .direction = "down")

```

```{r}

# Change data types to factors

  df <- df %>%
    
    mutate(across(province:father_part_household, as_factor))

```

```{r}

glimpse(df)

summary(df)

```
```{r}

# Summary statistics

  summary(df)

  levels(df$province)
  
  # How many people surveyed?
  
  df %>%
    
    summarise(sum(count)) # 28 220 people surveyed
  
  # How many people surveyed in each province?
  
  df %>%
    
    group_by(province) %>%
    
    summarise(people = sum(count))
  
  # How many people per age group?
  
  df %>%
    
    group_by(age_group) %>%
    
    summarise(people = sum(count))
  
  # How many people per age group?
  
  df %>%
    
    group_by(rel_head) %>%
    
    summarise(people = sum(count))
  
  # Father alive?
  
  df %>%
    
    group_by(father_alive) %>%
    
    summarise(people = sum(count))
  
  # Father part of household?
  
  df %>%
    
    group_by(father_part_household) %>%
    
    summarise(people = sum(count))
  

```


